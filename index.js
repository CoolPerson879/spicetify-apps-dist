var eternalDjukebox=(()=>{var t,e,r,F=Object.create,o=Object.defineProperty,B=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,I=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty,n=(t=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,e)=>("undefined"!=typeof require?require:t)[e]}):t)(function(t){if("react"===t)return Spicetify.React;if("react-dom"===t)return Spicetify.ReactDOM;if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')}),a=(e,r,n,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let t of i(r))q.call(e,t)||t===n||o(e,t,{get:()=>r[t],enumerable:!(a=B(r,t))||a.enumerable});return e},s=(t,e,r)=>(r=null!=t?F(I(t)):{},a(!e&&t&&t.__esModule?r:o(r,"default",{value:t,enumerable:!0}),t)),u=(t={"node_modules/tslib/tslib.js"(t,n){var e,r,o,i,s,u,l,c,f,h,d,p,g,b,m,_,y,v,w,x,M,S,A,k,j;!function(e){var a="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};function r(r,n){return r!==a&&("function"==typeof Object.create?Object.defineProperty(r,"__esModule",{value:!0}):r.__esModule=!0),function(t,e){return r[t]=n?n(t,e):e}}"function"==typeof define&&define.amd?define("tslib",["exports"],function(t){e(r(a,r(t)))}):"object"==typeof n&&"object"==typeof n.exports?e(r(a,r(n.exports))):e(r(a))}(function(t){var n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}),a=(e=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},o=function(t,e){var r={};for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r},i=function(t,e,r,n){var a,o=arguments.length,i=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;0<=s;s--)(a=t[s])&&(i=(o<3?a(i):3<o?a(e,r,i):a(e,r))||i);return 3<o&&i&&Object.defineProperty(e,r,i),i},s=function(r,n){return function(t,e){n(t,e,r)}},u=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(t,i,s,u){return new(s=s||Promise)(function(r,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function a(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?r(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,a)}o((u=u.apply(t,i||[])).next())})},c=function(n,a){var o,i,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(r){return function(t){var e=[r,t];if(o)throw new TypeError("Generator is already executing.");for(;u=l&&e[l=0]?0:u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))u.label=e[1];else if(6===e[0]&&u.label<s[1])u.label=s[1],s=e;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(e)}}e=a.call(n,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},f=function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||j(e,t,r)},j=Object.create?function(t,e,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);a&&("get"in a?e.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]},h=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,o=r.call(t),i=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)i.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i},p=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t},g=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),a=0,e=0;e<r;e++)for(var o=arguments[e],i=0,s=o.length;i<s;i++,a++)n[a]=o[i];return n},b=function(t,e,r){if(r||2===arguments.length)for(var n,a=0,o=e.length;a<o;a++)!n&&a in e||((n=n||Array.prototype.slice.call(e,0,a))[a]=e[a]);return t.concat(n||Array.prototype.slice.call(e))},m=function(t){return this instanceof m?(this.v=t,this):new m(t)},_=function(t,e,r){var a,o,i;if(Symbol.asyncIterator)return a=r.apply(t,e||[]),o=[],i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i;throw new TypeError("Symbol.asyncIterator is not defined.");function n(n){a[n]&&(i[n]=function(r){return new Promise(function(t,e){1<o.push([n,r,t,e])||s(n,r)})})}function s(t,e){try{(r=a[t](e)).value instanceof m?Promise.resolve(r.value.v).then(u,l):c(o[0][2],r)}catch(t){c(o[0][3],t)}var r}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}},y=function(n){var a,t={};return e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,r){t[e]=n[e]?function(t){return(a=!a)?{value:m(n[e](t)),done:"return"===e}:r?r(t):t}:r}},v=function(i){var t,e;if(Symbol.asyncIterator)return(t=i[Symbol.asyncIterator])?t.call(i):(i=h(i),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);throw new TypeError("Symbol.asyncIterator is not defined.");function r(o){e[o]=i[o]&&function(a){return new Promise(function(t,e){var r,n;a=i[o](a),r=t,t=e,n=a.done,e=a.value,Promise.resolve(e).then(function(t){r({value:t,done:n})},t)})}}},w=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e});x=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&j(e,t,r);return a(e,t),e},M=function(t){return t&&t.__esModule?t:{default:t}},S=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t===e&&n:e.has(t))return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t);throw new TypeError("Cannot read private member from an object whose class did not declare it")},A=function(t,e,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t===e&&a:e.has(t))return"a"===n?a.call(t,r):a?a.value=r:e.set(t,r),r;throw new TypeError("Cannot write private member to an object whose class did not declare it")},k=function(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)},t("__extends",e),t("__assign",r),t("__rest",o),t("__decorate",i),t("__param",s),t("__metadata",u),t("__awaiter",l),t("__generator",c),t("__exportStar",f),t("__createBinding",j),t("__values",h),t("__read",d),t("__spread",p),t("__spreadArrays",g),t("__spreadArray",b),t("__await",m),t("__asyncGenerator",_),t("__asyncDelegator",y),t("__asyncValues",v),t("__makeTemplateObject",w),t("__importStar",x),t("__importDefault",M),t("__classPrivateFieldGet",S),t("__classPrivateFieldSet",A),t("__classPrivateFieldIn",k)})}},function(){return e||(0,t[i(t)[0]])((e={exports:{}}).exports,e),e.exports}),l={},$=l,c={default:()=>function(){return Mt.default.createElement(xt,null)}};for(r in c)o($,r,{get:c[r],enumerable:!0});var f=s(n("react")),{__values:h,__read:d,__spreadArray:p}=s(u(),1).default;function N(t){return"function"==typeof t}(u=(u=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}})(function(t){Error.call(t),t.stack=(new Error).stack})).prototype=Object.create(Error.prototype);var g=u.prototype.constructor=u;function z(t,e){t&&0<=(e=t.indexOf(e))&&t.splice(e,1)}m.prototype.unsubscribe=function(){var e,t,r;if(!this.closed){this.closed=!0;var n=this._parentage;if(n)if(this._parentage=null,Array.isArray(n))try{for(var a=h(n),o=a.next();!o.done;o=a.next())o.value.remove(this)}catch(t){s={error:t}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}else n.remove(this);var i=this.initialTeardown;if(N(i))try{i()}catch(t){r=t instanceof g?t.errors:[t]}var s=this._finalizers;if(s){this._finalizers=null;try{for(var u=h(s),l=u.next();!l.done;l=u.next()){var c=l.value;try{L(c)}catch(t){r=null!=r?r:[],t instanceof g?r=p(p([],d(r)),d(t.errors)):r.push(t)}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}}if(r)throw new g(r)}},m.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)L(t);else{if(t instanceof m){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!=(e=this._finalizers)?e:[]).push(t)}},m.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},m.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},m.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&z(e,t)},m.prototype.remove=function(t){var e=this._finalizers;e&&z(e,t),t instanceof m&&t._removeParent(this)},m.EMPTY=((u=new m).closed=!0,u);var b=m;function m(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}b.EMPTY;function L(t){N(t)?t():t.unsubscribe()}var U="app-module__container___thHYo_eternalDjukebox",W="app-module__stats___LylvR_eternalDjukebox",_=s(n("react")),G="app-module__jukebox-graph___x0joh_eternalDjukebox",y=s(n("react"));function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Y=/^\s+/,V=/\s+$/;function w(t,e){var r;return e=e||{},(t=t||"")instanceof w?t:this instanceof w?(r=function(t){var e={r:0,g:0,b:0},r=1,n=null,a=null,o=null,i=!1,s=!1;"string"==typeof t&&(t=function(t){t=t.replace(Y,"").replace(V,"").toLowerCase();var e,r=!1;if(x[t])t=x[t],r=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=P.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=P.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=P.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=P.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=P.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=P.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=P.hex8.exec(t))return{r:A(e[1]),g:A(e[2]),b:A(e[3]),a:pt(e[4]),format:r?"name":"hex8"};if(e=P.hex6.exec(t))return{r:A(e[1]),g:A(e[2]),b:A(e[3]),format:r?"name":"hex"};if(e=P.hex4.exec(t))return{r:A(e[1]+""+e[1]),g:A(e[2]+""+e[2]),b:A(e[3]+""+e[3]),a:pt(e[4]+""+e[4]),format:r?"name":"hex8"};if(e=P.hex3.exec(t))return{r:A(e[1]+""+e[1]),g:A(e[2]+""+e[2]),b:A(e[3]+""+e[3]),format:r?"name":"hex"};return!1}(t));"object"==v(t)&&(E(t.r)&&E(t.g)&&E(t.b)?(e=function(t,e,r){return{r:255*M(t,255),g:255*M(e,255),b:255*M(r,255)}}(t.r,t.g,t.b),i=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):E(t.h)&&E(t.s)&&E(t.v)?(n=j(t.s),a=j(t.v),e=function(t,e,r){t=6*M(t,360),e=M(e,100),r=M(r,100);var n=Math.floor(t),t=t-n,a=r*(1-e),o=r*(1-t*e),t=r*(1-(1-t)*e),e=n%6;return{r:255*[r,o,a,a,t,r][e],g:255*[t,r,r,o,a,a][e],b:255*[a,a,t,r,r,o][e]}}(t.h,n,a),i=!0,s="hsv"):E(t.h)&&E(t.s)&&E(t.l)&&(n=j(t.s),o=j(t.l),e=function(t,e,r){var n,a,o;function i(t,e,r){return r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}t=M(t,360),e=M(e,100),r=M(r,100),0===e?n=a=o=r:(n=i(e=2*r-(r=r<.5?r*(1+e):r+e-r*e),r,t+1/3),a=i(e,r,t),o=i(e,r,t-1/3));return{r:255*n,g:255*a,b:255*o}}(t.h,n,o),i=!0,s="hsl"),t.hasOwnProperty("a"))&&(r=t.a);return r=ht(r),{ok:i,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}(t),this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),void(this._ok=r.ok)):new w(t,e)}function J(t,e,r){t=M(t,255),e=M(e,255),r=M(r,255);var n,a=Math.max(t,e,r),o=Math.min(t,e,r),i=(a+o)/2;if(a==o)n=u=0;else{var s=a-o,u=.5<i?s/(2-a-o):s/(a+o);switch(a){case t:n=(e-r)/s+(e<r?6:0);break;case e:n=(r-t)/s+2;break;case r:n=(t-e)/s+4}n/=6}return{h:n,s:u,l:i}}function Q(t,e,r){t=M(t,255),e=M(e,255),r=M(r,255);var n,a=Math.max(t,e,r),o=Math.min(t,e,r),i=a,s=a-o,u=0===a?0:s/a;if(a==o)n=0;else{switch(a){case t:n=(e-r)/s+(e<r?6:0);break;case e:n=(r-t)/s+2;break;case r:n=(t-e)/s+4}n/=6}return{h:n,s:u,v:i}}function X(t,e,r,n){t=[k(Math.round(t).toString(16)),k(Math.round(e).toString(16)),k(Math.round(r).toString(16))];return n&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0):t.join("")}function K(t,e,r,n){return[k(dt(n)),k(Math.round(t).toString(16)),k(Math.round(e).toString(16)),k(Math.round(r).toString(16))].join("")}function Z(t,e){e=0===e?0:e||10;t=w(t).toHsl();return t.s-=e/100,t.s=S(t.s),w(t)}function tt(t,e){e=0===e?0:e||10;t=w(t).toHsl();return t.s+=e/100,t.s=S(t.s),w(t)}function et(t){return w(t).desaturate(100)}function rt(t,e){e=0===e?0:e||10;t=w(t).toHsl();return t.l+=e/100,t.l=S(t.l),w(t)}function nt(t,e){e=0===e?0:e||10;t=w(t).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(-e/100*255))),t.g=Math.max(0,Math.min(255,t.g-Math.round(-e/100*255))),t.b=Math.max(0,Math.min(255,t.b-Math.round(-e/100*255))),w(t)}function at(t,e){e=0===e?0:e||10;t=w(t).toHsl();return t.l-=e/100,t.l=S(t.l),w(t)}function ot(t,e){t=w(t).toHsl(),e=(t.h+e)%360;return t.h=e<0?360+e:e,w(t)}function it(t){t=w(t).toHsl();return t.h=(t.h+180)%360,w(t)}function st(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=w(t).toHsl(),n=[w(t)],a=360/e,o=1;o<e;o++)n.push(w({h:(r.h+o*a)%360,s:r.s,l:r.l}));return n}function ut(t){var e=w(t).toHsl(),r=e.h;return[w(t),w({h:(r+72)%360,s:e.s,l:e.l}),w({h:(r+216)%360,s:e.s,l:e.l})]}function lt(t,e,r){e=e||6,r=r||30;var n=w(t).toHsl(),a=360/r,o=[w(t)];for(n.h=(n.h-(a*e>>1)+720)%360;--e;)n.h=(n.h+a)%360,o.push(w(n));return o}function ct(t,e){e=e||6;for(var t=w(t).toHsv(),r=t.h,n=t.s,a=t.v,o=[],i=1/e;e--;)o.push(w({h:r,s:n,v:a})),a=(a+i)%1;return o}w.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t=this.toRgb(),e=t.r/255,r=t.g/255,t=t.b/255,e=e<=.03928?e/12.92:Math.pow((.055+e)/1.055,2.4),r=r<=.03928?r/12.92:Math.pow((.055+r)/1.055,2.4),t=t<=.03928?t/12.92:Math.pow((.055+t)/1.055,2.4);return.2126*e+.7152*r+.0722*t},setAlpha:function(t){return this._a=ht(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=Q(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=Q(this._r,this._g,this._b),e=Math.round(360*t.h),r=Math.round(100*t.s),t=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+t+"%)":"hsva("+e+", "+r+"%, "+t+"%, "+this._roundA+")"},toHsl:function(){var t=J(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=J(this._r,this._g,this._b),e=Math.round(360*t.h),r=Math.round(100*t.s),t=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+t+"%)":"hsla("+e+", "+r+"%, "+t+"%, "+this._roundA+")"},toHex:function(t){return X(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){var e=this._r,r=this._g,n=this._b,a=this._a;return e=[k(Math.round(e).toString(16)),k(Math.round(r).toString(16)),k(Math.round(n).toString(16)),k(dt(a))],t&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)&&e[3].charAt(0)==e[3].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0)+e[3].charAt(0):e.join("")},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*M(this._r,255))+"%",g:Math.round(100*M(this._g,255))+"%",b:Math.round(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*M(this._r,255))+"%, "+Math.round(100*M(this._g,255))+"%, "+Math.round(100*M(this._b,255))+"%)":"rgba("+Math.round(100*M(this._r,255))+"%, "+Math.round(100*M(this._g,255))+"%, "+Math.round(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&ft[X(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+K(this._r,this._g,this._b,this._a),r=e;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+e+",endColorstr="+(r=t?"#"+K((e=w(t))._r,e._g,e._b,e._a):r)+")"},toString:function(t){var e=!!t,r=(t=t||this._format,!1),n=this._a<1&&0<=this._a;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),(r="hsv"===t?this.toHsvString():r)||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return w(this.toString())},_applyModification:function(t,e){t=t.apply(null,[this].concat([].slice.call(e)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(rt,arguments)},brighten:function(){return this._applyModification(nt,arguments)},darken:function(){return this._applyModification(at,arguments)},desaturate:function(){return this._applyModification(Z,arguments)},saturate:function(){return this._applyModification(tt,arguments)},greyscale:function(){return this._applyModification(et,arguments)},spin:function(){return this._applyModification(ot,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(lt,arguments)},complement:function(){return this._applyCombination(it,arguments)},monochromatic:function(){return this._applyCombination(ct,arguments)},splitcomplement:function(){return this._applyCombination(ut,arguments)},triad:function(){return this._applyCombination(st,[3])},tetrad:function(){return this._applyCombination(st,[4])}},w.fromRatio=function(t,e){if("object"==v(t)){var r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:j(t[r]));t=n}return w(t,e)},w.equals=function(t,e){return!(!t||!e)&&w(t).toRgbString()==w(e).toRgbString()},w.random=function(){return w.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},w.mix=function(t,e,r){r=0===r?0:r||50;t=w(t).toRgb(),e=w(e).toRgb(),r/=100;return w({r:(e.r-t.r)*r+t.r,g:(e.g-t.g)*r+t.g,b:(e.b-t.b)*r+t.b,a:(e.a-t.a)*r+t.a})},w.readability=function(t,e){t=w(t),e=w(e);return(Math.max(t.getLuminance(),e.getLuminance())+.05)/(Math.min(t.getLuminance(),e.getLuminance())+.05)},w.isReadable=function(t,e,r){var n=w.readability(t,e),a=!1,t=function(t){var e;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),t=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==t&&"large"!==t&&(t="small");return{level:e,size:t}}(r);switch(t.level+t.size){case"AAsmall":case"AAAlarge":a=4.5<=n;break;case"AAlarge":a=3<=n;break;case"AAAsmall":a=7<=n}return a},w.mostReadable=function(t,e,r){for(var n,a=null,o=0,i=(r=r||{}).includeFallbackColors,s=r.level,u=r.size,l=0;l<e.length;l++)o<(n=w.readability(t,e[l]))&&(o=n,a=w(e[l]));return w.isReadable(t,a,{level:s,size:u})||!i?a:(r.includeFallbackColors=!1,w.mostReadable(t,["#fff","#000"],r))};var x=w.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ft=w.hexNames=function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[t[e]]=e);return r}(x);function ht(t){return t=parseFloat(t),t=isNaN(t)||t<0||1<t?1:t}function M(t,e){"string"==typeof(r=t)&&-1!=r.indexOf(".")&&1===parseFloat(r)&&(t="100%");var r="string"==typeof(r=t)&&-1!=r.indexOf("%");return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function S(t){return Math.min(1,Math.max(0,t))}function A(t){return parseInt(t,16)}function k(t){return 1==t.length?"0"+t:""+t}function j(t){return t=t<=1?100*t+"%":t}function dt(t){return Math.round(255*parseFloat(t)).toString(16)}function pt(t){return A(t)/255}D="[\\s|\\(]+("+(u="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?",O="[\\s|\\(]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")[,|\\s]+("+u+")\\s*\\)?";var D,O,P={CSS_UNIT:new RegExp(u),rgb:new RegExp("rgb"+D),rgba:new RegExp("rgba"+O),hsl:new RegExp("hsl"+D),hsla:new RegExp("hsla"+O),hsv:new RegExp("hsv"+D),hsva:new RegExp("hsva"+O),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function E(t){return P.CSS_UNIT.exec(t)}var C=class{constructor(t=0,e=0){this.x=t,this.y=e}toString(){return this.x+","+this.y}static getMiddlePoint(t,e){return new C((t.x+e.x)/2,(t.y+e.y)/2)}static getDistanceBetweenPoints(t,e){var r=e.x-t.x,e=e.y-t.y;return Math.sqrt(e*e+r*r)}};function gt(t,e){return t*e/100}function H(t,e,r){t=function(t){t=function(t){return t*Math.PI/180}(t);return new C(Math.cos(t),Math.sin(t))}(360*t/100);return t.x=t.x*e+r/2,t.y=t.y*-e+r/2,t}var R=s(n("react")),bt={container:"app-module__container___thHYo_eternalDjukebox",stats:"app-module__stats___LylvR_eternalDjukebox","jukebox-graph":"app-module__jukebox-graph___x0joh_eternalDjukebox","edge-path":"app-module__edge-path___Snm24_eternalDjukebox"},mt=class extends R.default.Component{constructor(t){super(t),this.state={isHovered:!1}}render(){return R.default.createElement("path",{className:bt["beat-path"],fill:this.props.drawData.beat.isPlaying||this.state.isHovered?this.props.drawData.activeColor:this.props.drawData.color,d:this.props.drawData.drawCommand,onMouseOver:()=>this.setState(()=>({isHovered:!0})),onMouseOut:()=>this.setState(()=>({isHovered:!1}))},R.default.createElement("title",null,"Beat ",this.props.drawData.beat.index))}},T=s(n("react")),_t="app-module__edge-path___Snm24_eternalDjukebox",yt=class extends T.default.Component{constructor(t){super(t),this.state={isHovered:!1}}render(){return T.default.createElement("path",{className:_t+" "+(this.props.drawData.edge.isPlaying?"is-active":""),fill:"none",stroke:this.props.drawData.edge.isPlaying||this.state.isHovered?this.props.drawData.activeColor:this.props.drawData.color,strokeWidth:this.props.drawData.strokeWidth,d:this.props.drawData.drawCommand,onMouseOver:t=>this.onMouseOver(t.target),onMouseOut:()=>this.setState(()=>({isHovered:!1}))},T.default.createElement("title",null,this.props.drawData.edge.source.index+" - "+this.props.drawData.edge.destination.index))}onMouseOver(t){var e=document.getElementById("#jukebox-graph");null!=(e=null==e?void 0:e.firstChild)&&e.appendChild(t),this.setState(()=>({isHovered:!0}))}},vt=class extends y.default.Component{constructor(t){super(t),this.cmin=[],this.cmax=[],this.beatsDrawData=[],this.edgesDrawData=[]}render(){return 0===this.props.beats.length||0===this.props.segments.length?y.default.createElement("div",null,"Loading..."):(this.initSvgDrawData(600,300),y.default.createElement("div",null,y.default.createElement("svg",{id:"#jukebox-graph",height:600,width:600,viewBox:"0 0 600 600",className:G},y.default.createElement("g",{transform:"scale(-1,1) translate(-600, 0) rotate(-90,300,300) "},this.beatsDrawData.map(t=>y.default.createElement(mt,{drawData:t})),this.edgesDrawData.map(t=>y.default.createElement(yt,{drawData:t}))))))}initSvgDrawData(t,e){this.normalizeColor();var r=this.props.beats[0].start,n=this.props.beats[this.props.beats.length-1].start+this.props.beats[this.props.beats.length-1].duration-r,a=gt(40,t),o=gt(2,t);this.beatsDrawData=this.getBeatsDrawData(r,n,a+o,a,t,o),this.edgesDrawData=this.getEdgesDrawData(this.beatsDrawData,e)}getBeatsDrawData(l,c,f,h,d,p){return this.props.beats.map(t=>{var e=100*(t.start-l)/c,r=100*t.duration/c,n=H(e,f+(t.isPlaying?p:0),d),a=H(e+r,f+(t.isPlaying?p:0),d),o=H(e,h,d),i=H(e+r,h,d),s=this.getBeatColor(t),u=`M ${n.toString()} 
            A ${f},${f} 0 0 0 ${a.toString()}
            L ${i.toString()}
            A ${h},${h} 0 0 1 `+o.toString();return{beat:t,percentFromStart:e,percentOfSong:r,outerArcStart:n,outerArcEnd:a,innerArcStart:o,innerArcEnd:i,drawCommand:u,color:s,activeColor:w(s).complement().saturate(100).toHexString()}})}getEdgesDrawData(t,e){var r=[];for(const s of t)for(const u of s.beat.neighbours){var n=t[u.source.index],a=t[u.destination.index],o=C.getMiddlePoint(n.innerArcStart,n.innerArcEnd),i=C.getMiddlePoint(a.innerArcStart,a.innerArcEnd),n=C.getDistanceBetweenPoints(n.innerArcStart,n.innerArcEnd),a=C.getDistanceBetweenPoints(a.innerArcStart,a.innerArcEnd);r.push({edge:u,strokeWidth:Math.min(n,a),drawCommand:`
                        M ${o.toString()}
                        Q ${e},${e} `+i.toString(),color:s.color,activeColor:s.activeColor})}return r}componentDidUpdate(t){var e=document.querySelector("svg path.is-active");null!==e&&this.pathToFront(e)}pathToFront(t){var e=document.getElementById("#jukebox-graph");null!=(e=null==e?void 0:e.firstChild)&&e.appendChild(t)}normalizeColor(){this.cmin=[100,100,100],this.cmax=[-100,-100,-100];for(const r of this.props.segments)for(let t=0;t<3;t++){var e=r.timbre[t+1];e<this.cmin[t]&&(this.cmin[t]=e),e>this.cmax[t]&&(this.cmax[t]=e)}}getBeatColor(t){t=null!=(t=this.props.remixedBeats[t.index].firstOverlappingSegment)?t:null;return null!==t?this.getSegmentColor(t):"#000"}getSegmentColor(e){var r=[];for(let t=0;t<3;t++){var n=(e.timbre[t+1]-this.cmin[t])/(this.cmax[t]-this.cmin[t]);r[t]=n}return w.fromRatio({r:r[1],g:r[2],b:r[0]}).toHexString()}},wt=class extends _.default.Component{constructor(t){super(t),this.subscription=new b,this.state={playedBeats:0,listenTime:0}}componentDidMount(){this.subscription.add(window.jukebox.statsChanged$.subscribe(()=>{this.setState(()=>({playedBeats:this.props.songState.beatsPlayed,listenTime:(new Date).getTime()-this.props.songState.startTime}))}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){var t;return _.default.createElement("div",{className:U},_.default.createElement("h1",{style:{textAlign:"center"}},null==(t=this.props.songState.track.metadata)?void 0:t.title),_.default.createElement(vt,{beats:this.props.songState.graph.beats,segments:this.props.songState.analysis.segments,remixedBeats:this.props.songState.analysis.beats}),_.default.createElement("div",{className:W},_.default.createElement("span",{id:"sbeats"},"Total Beats:",_.default.createElement("span",{id:"beats"},this.state.playedBeats)),_.default.createElement("span",{id:"stime"},"Listen Time:",_.default.createElement("span",{id:"time"},this.millisToMinutesAndSeconds(this.state.listenTime)))))}millisToMinutesAndSeconds(t){var e=Math.floor(t/6e4),t=Math.floor(t%6e4/1e3);return 60===t?e+1+":00":e+":"+(t<10?"0":"")+t}},xt=class extends f.default.Component{constructor(t){super(t),this.subscription=new b,this.state={songState:null}}componentDidMount(){this.subscription.add(window.jukebox.songState$.subscribe(t=>{this.setState(()=>({songState:t}))}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){return null!==this.state.songState?f.default.createElement(wt,{songState:this.state.songState}):f.default.createElement("h1",{style:{textAlign:"center"}},"Jukebox not enabled.")}},Mt=s(n("react"));return u=l,a(o({},"__esModule",{value:!0}),u)})();const render=()=>eternalDjukebox.default();