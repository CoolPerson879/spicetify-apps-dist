var betterDlocalDfiles=(()=>{var T,z=Object.create,L=Object.defineProperty,j=Object.defineProperties,F=Object.getOwnPropertyDescriptor,B=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertyNames,Y=Object.getOwnPropertySymbols,Z=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,X=(e,t,a)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,V=(e,t)=>{for(var a in t=t||{})J.call(t,a)&&X(e,a,t[a]);if(Y)for(var a of Y(t))W.call(t,a)&&X(e,a,t[a]);return e},K=(e,t)=>j(e,B(t)),e=(e,t)=>function(){return t||(0,e[U(e)[0]])((t={exports:{}}).exports,t),t.exports},q=(t,a,r,l)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let e of U(a))J.call(t,e)||e===r||L(t,e,{get:()=>a[e],enumerable:!(l=F(a,e))||l.enumerable});return t},t=(e,t,a)=>(a=null!=e?z(Z(e)):{},q(!t&&e&&e.__esModule?a:L(a,"default",{value:e,enumerable:!0}),e)),a=e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),r=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),e=e({"node_modules/tslib/tslib.js"(e,r){var t,a,n,i,o,c,s,u,d,_,m,p,f,b,h,D,y,v,g,E,k,w,x,S,C,N,R,P,O;!function(t){var l="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};function a(a,r){return a!==l&&("function"==typeof Object.create?Object.defineProperty(a,"__esModule",{value:!0}):a.__esModule=!0),function(e,t){return a[e]=r?r(e,t):t}}"function"==typeof define&&define.amd?define("tslib",["exports"],function(e){t(a(l,a(e)))}):"object"==typeof r&&"object"==typeof r.exports?t(a(l,a(r.exports))):t(a(l))}(function(e){var r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}),l=(t=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},a=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var l in t=arguments[a])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},n=function(e,t){var a={};for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(a[l[r]]=e[l[r]]);return a},i=function(e,t,a,r){var l,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,r);else for(var o=e.length-1;0<=o;o--)(l=e[o])&&(i=(n<3?l(i):3<n?l(t,a,i):l(t,a))||i);return 3<n&&i&&Object.defineProperty(t,a,i),i},o=function(a,r){return function(e,t){r(e,t,a)}},c=function(e,t,a,r,l,n){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=r.kind,s="getter"===c?"get":"setter"===c?"set":"value",e=!t&&e?r.static?e:e.prototype:null,u=t||(e?Object.getOwnPropertyDescriptor(e,r.name):{}),d=!1,_=a.length-1;0<=_;_--){var m,p={};for(m in r)p[m]="access"===m?{}:r[m];for(m in r.access)p.access[m]=r.access[m];p.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");n.push(i(e||null))};var f=(0,a[_])("accessor"===c?{get:u.get,set:u.set}:u[s],p);if("accessor"===c){if(void 0!==f){if(null===f||"object"!=typeof f)throw new TypeError("Object expected");(o=i(f.get))&&(u.get=o),(o=i(f.set))&&(u.set=o),(o=i(f.init))&&l.push(o)}}else(o=i(f))&&("field"===c?l.push(o):u[s]=o)}e&&Object.defineProperty(e,r.name,u),d=!0},s=function(e,t,a){for(var r=2<arguments.length,l=0;l<t.length;l++)a=r?t[l].call(e,a):t[l].call(e);return r?a:void 0},u=function(e){return"symbol"==typeof e?e:"".concat(e)},d=function(e,t,a){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:a?"".concat(a," ",t):t})},_=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(e,i,o,c){return new(o=o||Promise)(function(a,t){function r(e){try{n(c.next(e))}catch(e){t(e)}}function l(e){try{n(c.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?a(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(r,l)}n((c=c.apply(e,i||[])).next())})},p=function(r,l){var n,i,o,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function e(a){return function(e){var t=[a,e];if(n)throw new TypeError("Generator is already executing.");for(;c=s&&t[s=0]?0:c;)try{if(n=1,i&&(o=2&t[0]?i.return:t[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,t[1])).done)return o;switch(i=0,(t=o?[2&t[0],o.value]:t)[0]){case 0:case 1:o=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,i=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(o=0<(o=c.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3]))c.label=t[1];else if(6===t[0]&&c.label<o[1])c.label=o[1],o=t;else{if(!(o&&c.label<o[2])){o[2]&&c.ops.pop(),c.trys.pop();continue}c.label=o[2],c.ops.push(t)}}t=l.call(r,c)}catch(e){t=[6,e],i=0}finally{n=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},f=function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||O(t,e,a)},O=Object.create?function(e,t,a,r){void 0===r&&(r=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&("get"in l?t.__esModule:!l.writable&&!l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,r,l)}:function(e,t,a,r){e[r=void 0===r?a:r]=t[a]},b=function(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],r=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,l,n=a.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=n.next()).done;)i.push(r.value)}catch(e){l={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(l)throw l.error}}return i},D=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e},y=function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;for(var r=Array(e),l=0,t=0;t<a;t++)for(var n=arguments[t],i=0,o=n.length;i<o;i++,l++)r[l]=n[i];return r},v=function(e,t,a){if(a||2===arguments.length)for(var r,l=0,n=t.length;l<n;l++)!r&&l in t||((r=r||Array.prototype.slice.call(t,0,l))[l]=t[l]);return e.concat(r||Array.prototype.slice.call(t))},g=function(e){return this instanceof g?(this.v=e,this):new g(e)},E=function(e,t,a){var l,n,i;if(Symbol.asyncIterator)return l=a.apply(e,t||[]),n=[],i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;throw new TypeError("Symbol.asyncIterator is not defined.");function r(r){l[r]&&(i[r]=function(a){return new Promise(function(e,t){1<n.push([r,a,e,t])||o(r,a)})})}function o(e,t){try{(a=l[e](t)).value instanceof g?Promise.resolve(a.value.v).then(c,s):u(n[0][2],a)}catch(e){u(n[0][3],e)}var a}function c(e){o("next",e)}function s(e){o("throw",e)}function u(e,t){e(t),n.shift(),n.length&&o(n[0][0],n[0][1])}},k=function(r){var l,e={};return t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,a){e[t]=r[t]?function(e){return(l=!l)?{value:g(r[t](e)),done:!1}:a?a(e):e}:a}},w=function(i){var e,t;if(Symbol.asyncIterator)return(e=i[Symbol.asyncIterator])?e.call(i):(i=b(i),t={},a("next"),a("throw"),a("return"),t[Symbol.asyncIterator]=function(){return this},t);throw new TypeError("Symbol.asyncIterator is not defined.");function a(n){t[n]=i[n]&&function(l){return new Promise(function(e,t){var a,r;l=i[n](l),a=e,e=t,r=l.done,t=l.value,Promise.resolve(t).then(function(e){a({value:e,done:r})},e)})}}},x=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t});S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&O(t,e,a);return l(t,e),t},C=function(e){return e&&e.__esModule?e:{default:e}},N=function(e,t,a,r){if("a"===a&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e===t&&r:t.has(e))return"m"===a?r:"a"===a?r.call(e):r?r.value:t.get(e);throw new TypeError("Cannot read private member from an object whose class did not declare it")},R=function(e,t,a,r,l){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!l)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e===t&&l:t.has(e))return"a"===r?l.call(e,a):l?l.value=a:t.set(e,a),a;throw new TypeError("Cannot write private member to an object whose class did not declare it")},P=function(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)},e("__extends",t),e("__assign",a),e("__rest",n),e("__decorate",i),e("__param",o),e("__esDecorate",c),e("__runInitializers",s),e("__propKey",u),e("__setFunctionName",d),e("__metadata",_),e("__awaiter",m),e("__generator",p),e("__exportStar",f),e("__createBinding",O),e("__values",b),e("__read",h),e("__spread",D),e("__spreadArrays",y),e("__spreadArray",v),e("__await",g),e("__asyncGenerator",E),e("__asyncDelegator",k),e("__asyncValues",w),e("__makeTemplateObject",x),e("__importStar",S),e("__importDefault",C),e("__classPrivateFieldGet",N),e("__classPrivateFieldSet",R),e("__classPrivateFieldIn",P)})}}),Q={},G=Q,$={default:()=>function(){return Ia.default.createElement(Oa,null)}};for(T in $)L(G,T,{get:$[T],enumerable:!0});var ee="app-module__container___thHYo_betterDlocalDfiles",te="app-module__padded___23rZp_betterDlocalDfiles",n=t(a()),ae=t(r());function _(e,...t){let a=Spicetify.Platform.Translations;for(const l of e)a=a[l];let r=a;for(const n in t)r=r.replace(`{${n}}`,t[n]);return r}var r="/better-local-files",i=class{},re=(i.album=r+"/album",i.albums=r+"/albums",i.artist=r+"/artist",i.artists=r+"/artists",i.tracks=r,[{key:"Tracks",href:i.tracks,label:_(["search.title.tracks"])},{key:"Albums",href:i.albums,label:_(["albums"])},{key:"Artists",href:i.artists,label:_(["artists"])}]),le=t(a()),c=t(a()),ne=t(a()),ie="app-module__active___JYUKA_betterDlocalDfiles";function oe(e){return ne.default.createElement("li",{"data-tab":e.item.key,onClick:()=>e.onItemClicked(e.item)},ne.default.createElement("button",{role:"navigation","aria-current":"page",className:e.active?ie:"",draggable:"false"},ne.default.createElement("span",{className:"main-type-mestoBold"},e.item.label)))}var ce=t(a()),se="app-module__active___JYUKA_betterDlocalDfiles";function ue(t){var e=ce.default.createElement(Spicetify.ReactComponent.Menu,null,t.items.filter(e=>e!==t.activeItem).map(e=>ce.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>t.onClick(e)},ce.default.createElement("span",null,e.label))));return ce.default.createElement("li",null,ce.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:e},ce.default.createElement("button",{role:"navigation","aria-current":"page",className:se,draggable:"false"},ce.default.createElement("span",{className:"main-type-mestoBold"},t.activeItem.label))))}var de={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"};function _e(t){const a=c.default.useRef(null),[l,r]=(0,c.useState)([]),[n,e]=(0,c.useState)(0),[i,o]=(0,c.useState)([]);return(0,c.useEffect)(()=>{a.current&&e(a.current.clientWidth)},[t.windowSize]),(0,c.useEffect)(()=>{var e;a.current&&(e=Array.from(a.current.children).map(e=>e.clientWidth),r(e))},[t.items]),(0,c.useEffect)(()=>{if(a.current)if(l.reduce((e,t)=>e+t,0)<=n)o([]);else{var e=Math.max(...l);const r=[];let a=e;l.forEach((e,t)=>{n>=a+e?a+=e:r.push(t)}),o(r)}},[n,l]),c.default.createElement("nav",{className:de.tabBar},c.default.createElement("ul",{ref:a},t.items.filter((e,t)=>!i.includes(t)).map(e=>c.default.createElement(oe,{key:e.key,item:e,active:t.activeItem.key===e.key,onItemClicked:t.onItemClicked})),i.length||0===l.length?c.default.createElement(ue,{items:t.items.filter((e,t)=>!i.includes(t)),activeItem:t.activeItem,onClick:t.onItemClicked}):null))}function me(e){const t=document.querySelector(".Root__main-view .os-resize-observer-host");if(!t)return null;const[a,r]=(0,le.useState)(t.clientWidth),l=()=>r(t.clientWidth);return(0,le.useEffect)(()=>{const e=new ResizeObserver(l);return e.observe(t),()=>{e.disconnect()}},[]),le.default.createElement(_e,{windowSize:a,items:e.items,activeItem:e.activeItem,onItemClicked:e.onItemClicked})}var l=t(a());function m(e,t,a){a="descending"===a?-1:1;return t<e?a:e<t?-1*a:0}var pe=class{constructor(e,t,a){this.uri=e,this.name=t,this.image=a,this.artists=[],this.discs=new Map}getTracks(){const a=[];return this.discs.forEach((e,t)=>a.push(...e)),a}getDuration(){return this.getTracks().map(e=>e.duration).reduce((e,t)=>e+t)}},fe=class{constructor(e,t){this.name=e,this.image=t,this.uri="spotify:local:"+e}},p=class{static async getTracks(){return this.isInitialized||await this.init(),this._tracks}static async getAlbums(){return this.isInitialized||await this.init(),this._albums}static async getArtists(){return this.isInitialized||await this.init(),this._artists}static getArtistTracks(t){return this.isInitialized?Array.from(this._tracks.values()).filter(e=>e.artists.some(e=>e.uri===t)).sort((e,t)=>m(e.album.name,t.album.name,"ascending")||m(e.discNumber,t.discNumber,"ascending")||m(e.trackNumber,t.trackNumber,"ascending")):[]}static async init(){if(!this.isInitialized){var e,t,a=await Spicetify.Platform.LocalFilesAPI.getTracks();this._tracks=new Map,this._albums=new Map,this._artists=new Map;for(const o of a){let a;var r=""===o.album.name?"Untitled":o.album.name,l="spotify:uri:"+o.album.name.toLowerCase().replace(/\s/g,"+"),r=(this._albums.has(l)?a=this._albums.get(l):(a=new pe(l,r,o.album.images[0].url),this._albums.set(l,a)),o.artists.flatMap(e=>this.getArtistsFromString(e.name,a.image)));for(let t of r)this._artists.has(t.uri)||this._artists.set(t.uri,t),a.artists.some(e=>e.uri===t.uri)||a.artists.push(t);l={addedAt:o.addedAt,duration:o.duration.milliseconds,uri:o.uri,name:o.name,discNumber:o.discNumber,trackNumber:o.trackNumber,artists:r,album:a,localTrack:o};this._tracks.set(l.uri,l),a.discs.has(o.discNumber)||a.discs.set(o.discNumber,[]),null!=(r=a.discs.get(o.discNumber))&&r.push(l)}for([e,t]of this._albums.entries())for(var[n,i]of t.discs.entries())t.discs.set(n,i.sort((e,t)=>m(e.trackNumber,t.trackNumber,"ascending")));this.isInitialized=!0}}static getArtistsFromString(e,t){return e.split(/(?:,|;)/).map(e=>new fe(e.trim(),t))}static async getBase64Image(e){e=new Blob([e]),e=URL.createObjectURL(e);let l=await(await fetch(e)).blob();return new Promise((t,a)=>{let r=new FileReader;r.onload=()=>{var e=r.result;null===e||e instanceof ArrayBuffer?a():t(e)},r.onerror=e=>a(e),r.readAsDataURL(l)})}constructor(){}},be=(p.isInitialized=!1,t(a())),he={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},r=(i,o)=>{var e=(0,be.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,children:r,...l},n)=>(0,be.createElement)("svg",{ref:n,...he,width:t,height:t,stroke:e,strokeWidth:a,className:"lucide lucide-"+i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),...l},[...o.map(([e,t])=>(0,be.createElement)(e,t)),...(Array.isArray(r)?r:[r])||[]]));return e.displayName=""+i,e},De=r("ArrowDown",[["line",{x1:"12",y1:"5",x2:"12",y2:"19",key:"myz83a"}],["polyline",{points:"19 12 12 19 5 12",key:"17kmxi"}]]),ye=r("ArrowUp",[["line",{x1:"12",y1:"19",x2:"12",y2:"5",key:"yrd7g6"}],["polyline",{points:"5 12 12 5 19 12",key:"1y7d7k"}]]),ve=r("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),ge=r("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Ee=r("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65",key:"1p50m8"}]]),ke={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"},o=t(a());function we(e){return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:""+ke.header},o.default.createElement("div",{className:ke["image-container"]},e.image),o.default.createElement("div",{className:ke["text-container"]},e.subtitle&&o.default.createElement("h2",{className:"main-entityHeader-subtitle main-entityHeader-small main-entityHeader-uppercase main-entityHeader-bold"},e.subtitle),o.default.createElement("h1",{className:"main-entityHeader-title",style:{fontSize:e.titleFontSize}},e.title),e.metadata&&o.default.createElement("div",{className:"main-entityHeader-metaData"},e.metadata),e.additionalText)))}var xe={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"},f=t(a()),s=t(a()),u=t(a()),Se=t(a());function Ce(t){const[e,a]=(0,Se.useState)(!1);return(0,Se.useEffect)(()=>{let e=new IntersectionObserver((e,t)=>a(e.some(e=>e.isIntersecting)),{rootMargin:"0px",threshold:0});return e.observe(t.current),()=>{e.disconnect()}},[t]),e}var d=t(a()),b=t(a());function Ne(e){const t=(0,b.useRef)(!1);return b.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",placement:"right-end",renderInline:!0,menu:e.submenu},b.default.createElement("li",{role:"presentation",className:"main-contextMenu-menuItem",onMouseEnter:e=>{e.currentTarget.click(),t.current=!0}},b.default.createElement("button",{className:"main-contextMenu-menuItemButton",role:"menuitem",tabIndex:-1},b.default.createElement("span",{dir:"auto",className:"ellipsis-one-line main-contextMenu-menuItemLabel",style:{fontSize:"0.875rem"}},b.default.createElement("span",null,e.label)),b.default.createElement("span",null,b.default.createElement("svg",{role:"img",height:"16",width:"16","aria-hidden":"true",className:"main-contextMenu-subMenuIcon",viewBox:"0 0 16 16",fill:"currentColor"},b.default.createElement("path",{d:"M14 10 8 4l-6 6h12z"}))))))}function h(e,t=null){null===t?Spicetify.Platform.History.push(e):Spicetify.Platform.History.push({pathname:e,state:{uri:t},hash:"",key:"",search:""})}var Re=t(a());function Pe(e){return Re.default.createElement(Spicetify.ReactComponent.Menu,null,e.artists.map(e=>Re.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>h(i.artist,e.uri)},Re.default.createElement("span",null,e.name))))}var Oe=t(a());function Ie(t){const a=Spicetify.Platform.PlaylistAPI,r=Spicetify.Platform.RootlistAPI,l=Spicetify.Platform.UserAPI,[e,n]=(0,Oe.useState)([]);return(0,Oe.useEffect)(()=>{!async function(){var e=await r.getContents();const t=await l.getUser();e=e.items.flatMap(e=>"playlist"===e.type?e:e.items).filter(e=>"playlist"===e.type&&e.owner.uri===t.uri),n(e)}()},[]),Oe.default.createElement(Spicetify.ReactComponent.Menu,null,e.map(e=>Oe.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>async function(e){await a.add(e,t.tracksUri,{after:"end"})}(e.uri)},Oe.default.createElement("span",null,e.name))))}function Ae(e){return d.default.createElement(Spicetify.ReactComponent.Menu,null,d.default.createElement(Spicetify.ReactComponent.MenuItem,{divider:"after",onClick:function(){Spicetify.Platform.PlayerAPI.addToQueue([{uri:e.track.uri}])}},d.default.createElement("span",null,_(["contextmenu.add-to-queue"]))),1===e.track.artists.length?d.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>h(i.artist,e.track.artists[0].uri)},d.default.createElement("span",null,_(["contextmenu.go-to-artist"]))):d.default.createElement(Ne,{label:_(["contextmenu.go-to-artist"]),submenu:d.default.createElement(Pe,{artists:e.track.artists})}),d.default.createElement(Spicetify.ReactComponent.MenuItem,{divider:"after",onClick:()=>h(i.album,e.track.album.uri)},d.default.createElement("span",null,_(["contextmenu.go-to-album"]))),d.default.createElement(Ne,{label:_(["contextmenu.add-to-playlist"]),submenu:d.default.createElement(Ie,{tracksUri:[e.track.uri]})}))}Spicetify.Locale;function He(e){var t=(0,u.useRef)(null),a=Ce(t),r=u.default.createElement("div",{style:{height:"54px"}});return u.default.createElement("div",{ref:t},a?u.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:u.default.createElement(Ae,{track:e.track})},u.default.createElement("div",{role:"row","aria-selected":e.selected,onClick:e.onClick,onDoubleClick:e.onDoubleClick},u.default.createElement("div",{className:`main-trackList-trackListRow main-trackList-trackListRowGrid ${e.active?"main-trackList-active":""} `+(e.selected?"main-trackList-selected":""),draggable:"true",role:"presentation"},u.default.createElement("div",{className:"main-trackList-rowSectionIndex",role:"gridcell","aria-colindex":1,tabIndex:-1},u.default.createElement("div",{className:"main-trackList-rowMarker"},e.playing?u.default.createElement(u.default.Fragment,null,u.default.createElement("img",{className:"main-trackList-playingIcon",width:"14",height:"14",alt:"",src:"/images/equaliser-green.svg"}),u.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:_(["playback-control.pause"]),showDelay:200},u.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":_(["playback-control.pause"]),tabIndex:0,"aria-expanded":"false",onClick:()=>Spicetify.Player.pause()},u.default.createElement("svg",{role:"img",height:"24",width:"24","aria-hidden":"true",fill:"currentColor",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24"},u.default.createElement("path",{d:"M5.7 3a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7H5.7zm10 0a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7h-2.6z"}))))):u.default.createElement(u.default.Fragment,null,u.default.createElement("span",{className:"main-trackList-number"},e.index),u.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:_(["tracklist.a11y.play"],e.track.name,e.track.artists.map(e=>e.name).join(", ")),showDelay:200},u.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":_(["tracklist.a11y.play"],e.track.name,e.track.artists.map(e=>e.name).join(", ")),onClick:()=>{e.active?Spicetify.Player.play():e.onDoubleClick()},tabIndex:-1},u.default.createElement("svg",{role:"img",height:"24",width:"24","aria-hidden":"true",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24","data-encore-id":"icon",fill:"currentColor"},u.default.createElement("path",{d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"}))))))),e.children&&u.Children.map(e.children,(e,t)=>u.default.createElement("div",{className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable",role:"gridcell","aria-colindex":t+2,tabIndex:-1},e)),u.default.createElement("div",{className:"main-trackList-rowSectionEnd",role:"gridcell","aria-colindex":u.Children.count(e.children)+2,tabIndex:-1},u.default.createElement("div",{className:"main-trackList-rowDuration"},Spicetify.Player.formatTime(e.track.duration)),u.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:u.default.createElement(Ae,{track:e.track})},u.default.createElement("button",{type:"button","aria-haspopup":"menu","aria-label":_(["more.label.track"],e.track.name,e.track.artists.map(e=>e.name).join(", ")),className:"main-moreButton-button main-trackList-rowMoreButton",tabIndex:-1},u.default.createElement("svg",{role:"img",height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16","data-encore-id":"icon",fill:"currentColor"},u.default.createElement("path",{d:"M3 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm6.5 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"})))))))):r)}var Me="app-module__upper___-tDl3_betterDlocalDfiles",D=t(a()),Te=t(a());function ze(e){return Te.default.createElement("svg",{role:"img",height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--spice-text)",className:e.className},Te.default.createElement("path",{d:"M14 10L8 4l-6 6h12z"}))}var Le=t(a());function je(e){return Le.default.createElement("svg",{role:"img",height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--spice-text)",className:e.className},Le.default.createElement("path",{d:"M14 6l-6 6-6-6h12z"}))}function Fe(a){function r(){return void 0===a.sortedHeader?D.default.createElement(D.default.Fragment,null):"ascending"===a.sortedHeader.order?D.default.createElement(ze,{className:"main-trackList-arrow"}):D.default.createElement(je,{className:"main-trackList-arrow"})}const l=void 0!==a.sortedHeader?"main-trackList-sortable":"";return D.default.createElement("div",{className:Me+" main-trackList-trackListHeader",role:"presentation"},D.default.createElement("div",{className:"main-trackList-trackListHeaderRow main-trackList-trackListRowGrid",role:"row","aria-rowindex":1},D.default.createElement("div",{className:"main-trackList-rowSectionIndex",role:"columnheader","aria-colindex":1,"aria-sort":"none",tabIndex:-1},"#"),a.headers.map((e,t)=>D.default.createElement("div",{key:e.key,className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable",role:"columnheader","aria-colindex":t+2,"aria-sort":a.sortedHeader&&a.sortedHeader.key===e.key?a.sortedHeader.order:"none",tabIndex:-1,onClick:()=>a.onHeaderClicked&&a.onHeaderClicked(e.key)},D.default.createElement("button",{className:"main-trackList-column "+l,tabIndex:-1},D.default.createElement("span",{className:"standalone-ellipsis-one-line"},e.label),a.sortedHeader&&a.sortedHeader.key===e.key&&r()))),D.default.createElement("div",{className:"main-trackList-rowSectionEnd",role:"columnheader","aria-colindex":a.headers.length+2,"aria-sort":"none",tabIndex:-1,onClick:()=>a.onHeaderClicked&&a.onHeaderClicked("duration")},D.default.createElement("div",{"aria-label":_(["tracklist.header.duration"]),className:"main-trackList-column main-trackList-durationHeader "+l},D.default.createElement("svg",{role:"img",height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},D.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"}),D.default.createElement("path",{d:"M8 3.25a.75.75 0 01.75.75v3.25H11a.75.75 0 010 1.5H7.25V4A.75.75 0 018 3.25z"}))),a.sortedHeader&&"duration"===a.sortedHeader.key&&r())))}var Be=t(a());var Ue=t(a());function Ye(a){const r=function(){var e;const[t,a]=(0,Be.useState)(null!=(e=null==(e=null==(e=null==(e=Spicetify.Player)?void 0:e.data)?void 0:e.track)?void 0:e.uri)?e:"");return(0,Be.useEffect)(()=>{function e(e){a(null!=(e=null==(e=(null==e?void 0:e.data).track)?void 0:e.uri)?e:"")}return Spicetify.Player.addEventListener("songchange",e),()=>Spicetify.Player.removeEventListener("songchange",e)}),t}(),l=function(){var e;const[t,a]=(0,Ue.useState)(null!=(e=null==(e=Spicetify.Player)?void 0:e.data)&&e.is_paused?"pause":"play");return(0,Ue.useEffect)(()=>{function e(e){a((null==e?void 0:e.data).is_paused?"pause":"play")}return Spicetify.Player.addEventListener("onplaypause",e),()=>Spicetify.Player.removeEventListener("onplaypause",e)}),t}(),[n,i]=(0,s.useState)(null);return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{role:"grid","aria-rowcount":a.tracks.length,"aria-colcount":a.headers.length+2,"aria-label":a.gridLabel,className:"main-trackList-trackList main-trackList-indexable",tabIndex:0},s.default.createElement(Fe,{headers:a.headers,sortedHeader:a.sortedHeader,onHeaderClicked:a.onHeaderClicked}),s.default.createElement("div",{role:"presentation"},a.tracks.map((e,t)=>s.default.createElement(He,{key:e.uri,track:e,index:a.useTrackNumber?e.trackNumber:t+1,selected:n===e.uri,active:r===e.uri,playing:r===e.uri&&"play"===l,onClick:()=>i(e.uri),onDoubleClick:()=>a.onPlayTrack(e.uri)},a.getRowContent(e))),a.subtracks.map(e=>s.default.createElement(s.default.Fragment,null,e.headerRow,e.tracks.map((e,t)=>s.default.createElement(He,{key:e.uri,track:e,index:a.useTrackNumber?e.trackNumber:t+1,selected:n===e.uri,active:r===e.uri,playing:r===e.uri&&"play"===l,onClick:()=>i(e.uri),onDoubleClick:()=>a.onPlayTrack(e.uri)},a.getRowContent(e))))))))}function Ze(t,e){0!==e.length&&e.some(e=>e.uri===t)&&Spicetify.Player.origin.play({uri:"spotify:internal:local-files",pages:[{items:e}]},{},{skipTo:{uri:t}})}function Je(e){0!==e.length&&Spicetify.Player.origin.play({uri:"spotify:internal:local-files",pages:[{items:e}]},{},{})}var We={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"},y=t(a());function Xe(t){var e=y.default.createElement(Spicetify.ReactComponent.Menu,null,y.default.createElement("li",null,y.default.createElement("span",{className:We["sort-menu-header"]+" main-contextMenu-menuHeading ellipsis-one-line",dir:"auto"},_(["drop_down.sort_by"]))),t.sortOptions.map(e=>y.default.createElement(Spicetify.ReactComponent.MenuItem,{key:e.key,onClick:()=>t.setSelectedSortOption(e.key)},y.default.createElement("div",{className:""+We["sort-menu-item"]},y.default.createElement("span",null,e.label),t.selectedSortOption.key===e.key&&("ascending"===t.selectedSortOption.order?y.default.createElement(ye,{className:""+We["sort-menu-caret"]}):y.default.createElement(De,{className:""+We["sort-menu-caret"]}))))));return y.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:e},y.default.createElement("button",{className:"x-sortBox-sortDropdown",type:"button",role:"button","aria-expanded":"false"},y.default.createElement("span",null,null!=(e=null==(e=t.sortOptions.find(e=>e.key===t.selectedSortOption.key))?void 0:e.label)?e:""),y.default.createElement(je,null)))}var Ve=t(a()),Ke={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"},{__extends:r,__values:qe,__read:Qe,__spreadArray:Ge}=t(e(),1).default;function v(e){return"function"==typeof e}function $e(e){e=e(function(e){Error.call(e),e.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e}var et=$e(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}});function tt(e,t){e&&0<=(t=e.indexOf(t))&&e.splice(t,1)}g.prototype.unsubscribe=function(){var t,e,a;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r))try{for(var l=qe(r),n=l.next();!n.done;n=l.next())n.value.remove(this)}catch(e){o={error:e}}finally{try{n&&!n.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}else r.remove(this);var i=this.initialTeardown;if(v(i))try{i()}catch(e){a=e instanceof et?e.errors:[e]}var o=this._finalizers;if(o){this._finalizers=null;try{for(var c=qe(o),s=c.next();!s.done;s=c.next()){var u=s.value;try{nt(u)}catch(e){a=null!=a?a:[],e instanceof et?a=Ge(Ge([],Qe(a)),Qe(e.errors)):a.push(e)}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}}if(a)throw new et(a)}},g.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)nt(e);else{if(e instanceof g){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(t=this._finalizers)?t:[]).push(e)}},g.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},g.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},g.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&tt(t,e)},g.prototype.remove=function(e){var t=this._finalizers;t&&tt(t,e),e instanceof g&&e._removeParent(this)},g.EMPTY=((e=new g).closed=!0,e);var at=g;function g(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var rt=at.EMPTY;function lt(e){return e instanceof at||e&&"closed"in e&&v(e.remove)&&v(e.add)&&v(e.unsubscribe)}function nt(e){v(e)?e():e.unsubscribe()}var it={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ot={setTimeout:function(e,t){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];var l=ot.delegate;return null!=l&&l.setTimeout?l.setTimeout.apply(l,Ge([e,t],Qe(a))):setTimeout.apply(void 0,Ge([e,t],Qe(a)))},clearTimeout:function(e){var t=ot.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ct(){}var st=ut("C",void 0,void 0);function ut(e,t,a){return{kind:e,value:t,error:a}}var dt=null;function _t(e){if(it.useDeprecatedSynchronousErrorHandling){var t=!dt;if(t&&(dt={errorThrown:!1,error:null}),e(),t){var t=dt,a=t.errorThrown,t=t.error;if(dt=null,a)throw t}}else e()}r(E,mt=at),E.create=function(e,t,a){return new vt(e,t,a)},E.prototype.next=function(e){this.isStopped?kt(ut("N",e,void 0),this):this._next(e)},E.prototype.error=function(e){this.isStopped?kt(ut("E",void 0,e),this):(this.isStopped=!0,this._error(e))},E.prototype.complete=function(){this.isStopped?kt(st,this):(this.isStopped=!0,this._complete())},E.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,mt.prototype.unsubscribe.call(this),this.destination=null)},E.prototype._next=function(e){this.destination.next(e)},E.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},E.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}};var mt,pt=E;function E(e){var t=mt.call(this)||this;return t.isStopped=!1,e?lt(t.destination=e)&&e.add(t):t.destination=wt,t}var ft=Function.prototype.bind;function bt(e,t){return ft.call(e,t)}Dt.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Et(e)}},Dt.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Et(e)}else Et(e)},Dt.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Et(e)}};var ht=Dt;function Dt(e){this.partialObserver=e}r(gt,yt=pt);var yt,vt=gt;function gt(e,t,a){var r=yt.call(this)||this;return a=v(e)||!e?{next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=a?a:void 0}:r&&it.useDeprecatedNextContext?((t=Object.create(e)).unsubscribe=function(){return r.unsubscribe()},{next:e.next&&bt(e.next,t),error:e.error&&bt(e.error,t),complete:e.complete&&bt(e.complete,t)}):e,r.destination=new ht(a),r}function Et(e){var t,a;it.useDeprecatedSynchronousErrorHandling?(a=e,it.useDeprecatedSynchronousErrorHandling&&dt&&(dt.errorThrown=!0,dt.error=a)):(t=e,ot.setTimeout(function(){var e=it.onUnhandledError;if(!e)throw t;e(t)}))}function kt(e,t){var a=it.onStoppedNotification;a&&ot.setTimeout(function(){return a(e,t)})}var wt={closed:!0,next:ct,error:function(e){throw e},complete:ct},e="function"==typeof Symbol&&Symbol.observable||"@@observable";function xt(e){return e}k.prototype.lift=function(e){var t=new k;return t.source=this,t.operator=e,t},k.prototype.subscribe=function(e,t,a){var r,l=this,n=(r=e)&&r instanceof pt||function(e){return e&&v(e.next)&&v(e.error)&&v(e.complete)}(r)&&lt(r)?e:new vt(e,t,a);return _t(function(){var e=l.operator,t=l.source;n.add(e?e.call(n,t):t?l._subscribe(n):l._trySubscribe(n))}),n},k.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},k.prototype.forEach=function(r,e){var l=this;return new(e=Ct(e))(function(e,t){var a=new vt({next:function(e){try{r(e)}catch(e){t(e),a.unsubscribe()}},error:t,complete:e});l.subscribe(a)})},k.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},k.prototype[e]=function(){return this},k.prototype.pipe=function(){for(var t,e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return(0===(t=e).length?xt:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},k.prototype.toPromise=function(e){var r=this;return new(e=Ct(e))(function(e,t){var a;r.subscribe(function(e){return a=e},function(e){return t(e)},function(){return e(a)})})},k.create=function(e){return new k(e)};var St=k;function k(e){e&&(this._subscribe=e)}function Ct(e){return null!=(e=null!=e?e:it.Promise)?e:Promise}function Nt(a){return function(e){if(v(null==(t=e)?void 0:t.lift))return e.lift(function(e){try{return a(e,this)}catch(e){this.error(e)}});var t;throw new TypeError("Unable to lift unknown Observable type")}}function Rt(e,t,a,r,l){return new Ot(e,t,a,r,l)}r(It,Pt=pt),It.prototype.unsubscribe=function(){var e;this.shouldUnsubscribe&&!this.shouldUnsubscribe()||(e=this.closed,Pt.prototype.unsubscribe.call(this),e)||null==(e=this.onFinalize)||e.call(this)};var Pt,Ot=It;function It(t,a,e,r,l,n){var i=Pt.call(this,t)||this;return i.onFinalize=l,i.shouldUnsubscribe=n,i._next=a?function(e){try{a(e)}catch(e){t.error(e)}}:Pt.prototype._next,i._error=r?function(e){try{r(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:Pt.prototype._error,i._complete=e?function(){try{e()}catch(e){t.error(e)}finally{this.unsubscribe()}}:Pt.prototype._complete,i}var At,Ht=$e(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Mt=(r(w,At=St),w.prototype.lift=function(e){var t=new zt(this,this);return t.operator=e,t},w.prototype._throwIfClosed=function(){if(this.closed)throw new Ht},w.prototype.next=function(l){var n=this;_t(function(){var t,e;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=qe(n.currentObservers),r=a.next();!r.done;r=a.next())r.value.next(l)}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}}})},w.prototype.error=function(t){var a=this;_t(function(){if(a._throwIfClosed(),!a.isStopped){a.hasError=a.isStopped=!0,a.thrownError=t;for(var e=a.observers;e.length;)e.shift().error(t)}})},w.prototype.complete=function(){var t=this;_t(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},w.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(w.prototype,"observed",{get:function(){var e;return 0<(null==(e=this.observers)?void 0:e.length)},enumerable:!1,configurable:!0}),w.prototype._trySubscribe=function(e){return this._throwIfClosed(),At.prototype._trySubscribe.call(this,e)},w.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},w.prototype._innerSubscribe=function(e){var t=this,a=this.hasError,r=this.isStopped,l=this.observers;return a||r?rt:(this.currentObservers=null,l.push(e),new at(function(){t.currentObservers=null,tt(l,e)}))},w.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,a=this.thrownError,r=this.isStopped;t?e.error(a):r&&e.complete()},w.prototype.asObservable=function(){var e=new St;return e.source=this,e},w.create=function(e,t){return new zt(e,t)},w);function w(){var e=At.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}r(Lt,Tt=Mt),Lt.prototype.next=function(e){var t,a;null!=(a=null==(t=this.destination)?void 0:t.next)&&a.call(t,e)},Lt.prototype.error=function(e){var t,a;null!=(a=null==(t=this.destination)?void 0:t.error)&&a.call(t,e)},Lt.prototype.complete=function(){var e,t;null!=(t=null==(e=this.destination)?void 0:e.complete)&&t.call(e)},Lt.prototype._subscribe=function(e){var t;return null!=(t=null==(t=this.source)?void 0:t.subscribe(e))?t:rt};var Tt,zt=Lt;function Lt(e,t){var a=Tt.call(this)||this;return a.destination=e,a.source=t,a}var jt,Ft={now:function(){return(Ft.delegate||Date).now()},delegate:void 0},e=(r(Bt,jt=at),Bt.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},Bt);function Bt(e,t){return jt.call(this)||this}var Ut,Yt={setInterval:function(e,t){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];var l=Yt.delegate;return null!=l&&l.setInterval?l.setInterval.apply(l,Ge([e,t],Qe(a))):setInterval.apply(void 0,Ge([e,t],Qe(a)))},clearInterval:function(e){var t=Yt.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},e=(r(x,Ut=e),x.prototype.schedule=function(e,t){var a;return void 0===t&&(t=0),this.closed||(this.state=e,e=this.id,a=this.scheduler,null!=e&&(this.id=this.recycleAsyncId(a,e,t)),this.pending=!0,this.delay=t,this.id=null!=(e=this.id)?e:this.requestAsyncId(a,this.id,t)),this},x.prototype.requestAsyncId=function(e,t,a){return void 0===a&&(a=0),Yt.setInterval(e.flush.bind(e,this),a)},x.prototype.recycleAsyncId=function(e,t,a){if(null!=(a=void 0===a?0:a)&&this.delay===a&&!1===this.pending)return t;null!=t&&Yt.clearInterval(t)},x.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;e=this._execute(e,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},x.prototype._execute=function(e,t){var a,r=!1;try{this.work(e)}catch(e){r=!0,a=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),a},x.prototype.unsubscribe=function(){var e,t,a;this.closed||(e=this.id,a=(t=this.scheduler).actions,this.work=this.state=this.scheduler=null,this.pending=!1,tt(a,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,Ut.prototype.unsubscribe.call(this))},x);function x(e,t){var a=Ut.call(this,e,t)||this;return a.scheduler=e,a.work=t,a.pending=!1,a}Wt.prototype.schedule=function(e,t,a){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(a,t)},Wt.now=Ft.now;var Zt,Jt=Wt;function Wt(e,t){void 0===t&&(t=Wt.now),this.schedulerActionCtor=e,this.now=t}function Xt(e,t){e=Zt.call(this,e,t=void 0===t?Jt.now:t)||this;return e.actions=[],e._active=!1,e}r(Xt,Zt=Jt),Xt.prototype.flush=function(e){var t,a=this.actions;if(this._active)a.push(e);else{this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=a.shift());if(this._active=!1,t){for(;e=a.shift();)e.unsubscribe();throw t}}};var Vt=new Xt(e);function Kt(e,t){return e===t}function qt(t){const[a]=(0,Ve.useState)(new Mt);return(0,Ve.useEffect)(()=>{const e=a.asObservable().pipe((o=600,void 0===c&&(c=Vt),Nt(function(e,a){var r=null,t=null,l=null,n=function(){var e;r&&(r.unsubscribe(),e=t,t=r=null,a.next(e))};function i(){var e=l+o,t=c.now();t<e?(r=this.schedule(void 0,e-t),a.add(r)):n()}e.subscribe(Rt(a,function(e){t=e,l=c.now(),r||(r=c.schedule(i,o),a.add(r))},function(){n(),a.complete()},void 0,function(){t=r=null}))})),(void 0===i&&(i=xt),n=null!=n?n:Kt,Nt(function(e,a){var r,l=!0;e.subscribe(Rt(a,function(e){var t=i(e);!l&&n(r,t)||(l=!1,r=t,a.next(e))}))}))).subscribe(e=>t.setDebouncedSearch(e));var n,i,o,c;return()=>e.unsubscribe()},[a]),Ve.default.createElement("div",{className:Ke["search-container"],role:"search","aria-expanded":"false"},Ve.default.createElement("div",{className:Ke["search-icon"]},Ve.default.createElement(Ee,{size:18})),Ve.default.createElement("input",{role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",placeholder:_(["navbar.search"]),"aria-hidden":"true",tabIndex:-1,value:t.search,onChange:e=>{return e=e.target.value,a.next(e),void t.setSearch(e)}}))}var Qt="app-module__play-button___8YiVF_betterDlocalDfiles",Gt=t(a());function $t(t){var e={height:t.size+"px",width:t.size+"px",borderRadius:t.size/2+"px"};return Gt.default.createElement("button",{className:Qt,"aria-label":"Lecture",onClick:e=>{e.stopPropagation(),t.onClick()},style:e},Gt.default.createElement(ge,{fill:"var(--spice-main)",stroke:"var(--spice-main)",size:t.iconSize}))}var ea=t(a());function ta(e){return ea.default.createElement("a",{draggable:"true",className:"standalone-ellipsis-one-line",dir:"auto",href:"#",tabIndex:-1,onClick:()=>h(i.album,e.track.album.uri)},e.track.album.name)}var aa=t(a()),S=t(a());function ra(e){return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"main-trackList-rowMainContent"},S.default.createElement("div",{dir:"auto",className:"main-trackList-rowTitle standalone-ellipsis-one-line"},e.track.name),e.withArtists&&S.default.createElement("span",{className:"main-trackList-rowSubTitle standalone-ellipsis-one-line"},e.track.artists.map(e=>S.default.createElement("a",{draggable:"true",dir:"auto",href:"#",tabIndex:-1,onClick:()=>h(i.artist,e.uri)},e.name)).reduce((e,t)=>null===e?[t]:[...e,S.default.createElement(S.default.Fragment,null,", "),t],null))))}function la(e){return aa.default.createElement(aa.default.Fragment,null,aa.default.createElement("img",{"aria-hidden":"false",draggable:"false",loading:"eager",src:e.track.album.image,alt:"Track image",className:"main-image-image main-trackList-rowImage main-image-loaded",width:"40",height:"40",onError:e=>e.currentTarget.outerHTML=`
    <div class="main-trackList-rowImage main-trackList-rowImageFallback">
        <svg
            role="img"
            height="16"
            width="16"
            aria-hidden="true"
            viewBox="0 0 16 16"
            data-encore-id="icon"
            fill="currentColor"
        >
            <path d="M10 2v9.5a2.75 2.75 0 11-2.75-2.75H8.5V2H10zm-1.5 8.25H7.25A1.25 1.25 0 108.5 11.5v-1.25z"></path>
        </svg>
    </div>`}),aa.default.createElement(ra,{track:e.track,withArtists:e.withArtists}))}function na(a){var[e,t]=(0,f.useState)("");const[r,l]=(0,f.useState)("");var n=[{key:"date",label:_(["sort.date-added"])},{key:"title",label:_(["sort.title"])},{key:"album",label:_(["sort.album"])},{key:"duration",label:_(["sort.duration"])}],i=[{key:"title",label:_(["tracklist.header.title"])},{key:"album",label:_(["tracklist.header.album"])},{key:"date",label:_(["tracklist.header.date-added"])}];const[o,c]=(0,f.useState)(K(V({},n[0]),{order:"ascending"}));const s=(0,f.useMemo)(()=>{return e=a.tracks,""===(t=r)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.album.name.toLowerCase().includes(t.toLowerCase())||e.artists.some(e=>e.name.toLowerCase().includes(t.toLowerCase())));var e,t},[a.tracks,r]),u=(0,f.useMemo)(()=>[...function(e,a){switch(a.key){case"date":return e.sort((e,t)=>m(e.addedAt,t.addedAt,a.order));case"title":return e.sort((e,t)=>m(e.name,t.name,a.order));case"album":return e.sort((e,t)=>m(e.album.name,t.album.name,a.order));case"duration":return e.sort((e,t)=>m(e.duration,t.duration,a.order));default:return e}}(s,o)],[s,o]);function d(t){c(e=>{return{key:t,order:e.key===t&&"ascending"===e.order?"descending":"ascending"}})}return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:""+xe["action-bar"]},f.default.createElement($t,{size:60,iconSize:24,onClick:()=>Je(u.map(e=>e.localTrack))}),f.default.createElement("div",{className:xe.controls},f.default.createElement(qt,{search:e,setSearch:t,debouncedSearch:r,setDebouncedSearch:l}),f.default.createElement(Xe,{sortOptions:n,selectedSortOption:o,setSelectedSortOption:d}))),f.default.createElement(Ye,{tracks:u,subtracks:[],gridLabel:_(["local-files"]),useTrackNumber:!1,onPlayTrack:e=>Ze(e,u.map(e=>e.localTrack)),headers:i,onHeaderClicked:d,sortedHeader:o,getRowContent:e=>[f.default.createElement(la,{track:e,withArtists:!0}),f.default.createElement(ta,{track:e}),f.default.createElement("span",null,e.addedAt.toLocaleDateString())]}))}function ia(){const[e,t]=(0,l.useState)([]);return(0,l.useEffect)(()=>{!async function(){var e=await p.getTracks();t(Array.from(e.values()))}()},[]),l.default.createElement(l.default.Fragment,null,l.default.createElement(we,{image:l.default.createElement(ve,{fill:"var(--spice-text)",size:100}),title:_(["local-files"]),titleFontSize:"6rem",additionalText:l.default.createElement(l.default.Fragment,null,l.default.createElement("p",null,_(["local-files.description"])),l.default.createElement("p",null,_(["tracklist-header.songs-counter",1===e.length?"one":"other"],e.length)))}),l.default.createElement(na,{tracks:e}))}var C=t(a()),oa={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"},N=t(a()),R=t(a());function ca(e){return R.default.createElement("div",{className:"main-trackList-trackListRowGrid main-trackList-discRow",role:"presentation"},R.default.createElement("div",{className:"main-trackList-rowSectionIndex",role:"gridcell","aria-colindex":1,tabIndex:-1},R.default.createElement("div",{className:"main-trackList-rowMarker"},R.default.createElement("span",{className:"main-trackList-icon"},R.default.createElement("svg",{role:"img",height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},R.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"}),R.default.createElement("path",{d:"M8 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM5 8a3 3 0 1 1 6 0 3 3 0 0 1-6 0z"}))))),R.default.createElement("div",{className:"main-trackList-rowSectionStart",role:"gridcell","aria-colindex":2,tabIndex:-1},R.default.createElement("div",{className:"main-trackList-rowMainContent"},R.default.createElement("div",{dir:"auto",className:"main-trackList-rowTitle main-trackList-discTitle standalone-ellipsis-one-line"},_(["tracklist.disc-sperator.title"],e.discNumber)))))}var sa="app-module__flex-centered___5gRmM_betterDlocalDfiles",ua=t(a()),da=t(a());function _a(){return da.default.createElement("svg",{role:"img",height:"32",width:"32","aria-hidden":"true",viewBox:"0 0 24 24","data-encore-id":"icon",fill:"currentColor"},da.default.createElement("path",{d:"M4.5 13.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm15 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-7.5 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"}))}function ma(e){return ua.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:e.label,showDelay:100},ua.default.createElement("div",{className:""+sa},ua.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:e.menu},ua.default.createElement("button",{type:"button","aria-haspopup":"menu","aria-label":e.label,className:"main-moreButton-button "+sa,"aria-expanded":"false"},ua.default.createElement(_a,null)))))}var pa=t(a());function fa(e){return pa.default.createElement(Spicetify.ReactComponent.Menu,null,pa.default.createElement(Spicetify.ReactComponent.MenuItem,{divider:"after",onClick:function(){Spicetify.Platform.PlayerAPI.addToQueue(e.tracks.map(e=>({uri:e.uri})))}},pa.default.createElement("span",null,_(["contextmenu.add-to-queue"]))),pa.default.createElement(Ne,{label:_(["contextmenu.add-to-playlist"]),submenu:pa.default.createElement(Ie,{tracksUri:e.tracks.map(e=>e.uri)})}))}function ba(e){var t=[],a=[];const r=Array.from(e.discs.values()).flat();if(1===e.discs.size)t.push(...r);else for(var[l,n]of e.discs.entries())a.push({headerRow:N.default.createElement(ca,{discNumber:l}),tracks:n});var i=[{key:"title",label:_(["sort.title"])}];return N.default.createElement(N.default.Fragment,null,N.default.createElement("div",{className:""+oa["action-bar"]},N.default.createElement("div",{className:oa["flex-centered"]+" "+oa["action-bar-button-container"]},N.default.createElement($t,{size:60,iconSize:24,onClick:()=>Je(r.map(e=>e.localTrack))}),N.default.createElement(ma,{label:_(["more.label.context"],r[0].album.name),menu:N.default.createElement(fa,{tracks:r})}))),N.default.createElement(Ye,{tracks:t,subtracks:a,gridLabel:e.albumName,useTrackNumber:!0,onPlayTrack:e=>Ze(e,r.map(e=>e.localTrack)),headers:i,getRowContent:e=>[N.default.createElement(ra,{track:e,withArtists:!0})]}))}function ha(e){return C.default.createElement(we,{image:C.default.createElement("img",{src:e.album.image,alt:"album image",className:"main-image-image main-entityHeader-image main-entityHeader-shadow main-image-loaded"}),subtitle:_(["album"]),title:e.album.name,metadata:C.default.createElement(C.default.Fragment,null,e.album.artists.map(e=>C.default.createElement("span",null,C.default.createElement("a",{href:"#",draggable:"false",onClick:()=>h(i.artist,e.uri)},e.name))).reduce((e,t)=>null===e?[t]:[...e,C.default.createElement("span",{className:"main-entityHeader-divider"}),t],null),C.default.createElement("span",{className:"main-entityHeader-metaDataText"},_(["tracklist-header.songs-counter",1===e.album.getTracks().length?"one":"other"],e.album.getTracks().length)),C.default.createElement("span",{className:"main-entityHeader-metaDataText"},(e=e.album.getDuration(),t=Math.floor(e/1e3%60),a=Math.floor(e/1e3/60%60),e=Math.floor(e/1e3/60/60%24),r=[],0!==e&&r.push(_(["time.hours.short",1===e?"one":"other"],e)),0!==a&&r.push(_(["time.minutes.short",1===a?"one":"other"],a)),0===e&&0!==t&&r.push(_(["time.seconds.short",1===t?"one":"other"],t)),r.join(" "))))});var t,a,r}function Da(){var e,t=Spicetify.Platform.History;const a=null!=(e=t.location.state.uri)?e:null;if(null===a)return t.replace(i.albums),C.default.createElement(C.default.Fragment,null);const[r,l]=(0,C.useState)(null);return(0,C.useEffect)(()=>{!async function(){var e=await p.getAlbums();e.has(a)?l(e.get(a)):h(i.albums)}()},[]),C.default.createElement(C.default.Fragment,null,null!==r&&C.default.createElement(C.default.Fragment,null,C.default.createElement(ha,{album:r}),C.default.createElement(ba,{albumName:r.name,discs:r.discs})))}var P=t(a()),ya={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"},O=t(a()),va={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"};function ga(e){var t=(0,O.useRef)(null),a=Ce(t),r=O.default.createElement("div",{style:{height:"260px"}});return O.default.createElement("div",{ref:t},a?O.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:O.default.createElement(fa,{tracks:p.getArtistTracks(e.artist.uri)})},O.default.createElement("div",{className:va["main-card-card"]+" main-card-card",onClick:()=>h(i.artist,e.artist.uri)},O.default.createElement("div",{draggable:"true",className:"main-card-draggable"},O.default.createElement("div",{className:"main-card-imageContainer"},O.default.createElement("div",{className:"main-cardImage-imageWrapper main-cardImage-circular"},O.default.createElement("div",null,O.default.createElement("img",{"aria-hidden":"false",draggable:"false",loading:"lazy",src:e.artist.image,alt:"artist image",className:"main-image-image main-cardImage-image main-cardImage-circular main-image-loading main-image-loaded"}))),O.default.createElement("div",{className:"main-card-PlayButtonContainer"},O.default.createElement("div",{className:"main-playButton-PlayButton"},O.default.createElement($t,{size:42,iconSize:20,onClick:()=>e.onPlayClicked(e.artist)})))),O.default.createElement("div",{className:"main-card-cardMetadata"},O.default.createElement("span",{draggable:"false",title:e.artist.name,className:va["main-cardHeader-link"]+" main-cardHeader-link",dir:"auto"},O.default.createElement("div",{className:"main-cardHeader-text"},e.artist.name)),O.default.createElement("div",{className:"main-cardSubHeader-root"},O.default.createElement("span",{className:va["text-subdued"]},_(["artist"]))))))):r)}function Ea(){const[a,t]=(0,P.useState)([]);var[e,r]=(0,P.useState)("");const[l,n]=(0,P.useState)("");var i=[{key:"title",label:_(["collection.sort.alphabetical"])}];(0,P.useEffect)(()=>{!async function(){var e=await p.getArtists();t(Array.from(e).map(([,e])=>e))}()},[]);const o=(0,P.useMemo)(()=>{return e=a,""===(t=l)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()));var e,t},[a,l]),[c,s]=(0,P.useState)(K(V({},i[0]),{order:"ascending"}));var u=(0,P.useMemo)(()=>{return[...(e=o,"title"!==(a=c).key?e:e.sort((e,t)=>m(e.name,t.name,a.order)))];var e,a},[o,c]);function d(e){Je(p.getArtistTracks(e.uri).map(e=>e.localTrack))}return P.default.createElement(P.default.Fragment,null,P.default.createElement("div",{className:ya["album-header"]},P.default.createElement("h1",null,_(["artists"])),P.default.createElement("div",{className:ya.controls},P.default.createElement(qt,{search:e,setSearch:r,debouncedSearch:l,setDebouncedSearch:n}),P.default.createElement(Xe,{sortOptions:i,selectedSortOption:c,setSelectedSortOption:function(t){s(e=>{return{key:t,order:e.key===t&&"ascending"===e.order?"descending":"ascending"}})}}))),P.default.createElement("div",{className:ya["album-grid"]+" main-gridContainer-gridContainer main-gridContainer-fixedWidth"},u.map(e=>P.default.createElement(ga,{key:e.uri,artist:e,onPlayClicked:d}))))}var I=t(a()),ka={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"},A=t(a()),wa={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"};function xa(e){var t=(0,A.useRef)(null),a=Ce(t),r=A.default.createElement("div",{style:{height:"250px"}});return A.default.createElement("div",{ref:t},a?A.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:A.default.createElement(fa,{tracks:e.album.getTracks()})},A.default.createElement("div",{className:wa["main-card-card"]+" main-card-card",onClick:()=>h(i.album,e.album.uri)},A.default.createElement("div",{draggable:"true",className:"main-card-draggable"},A.default.createElement("div",{className:"main-card-imageContainer"},A.default.createElement("div",{className:"main-cardImage-imageWrapper"},A.default.createElement("div",null,A.default.createElement("img",{"aria-hidden":"false",draggable:"false",loading:"lazy",src:e.album.image,alt:"album image",className:"main-image-image main-cardImage-image main-image-loading main-image-loaded"}))),A.default.createElement("div",{className:"main-card-PlayButtonContainer"},A.default.createElement("div",{className:"main-playButton-PlayButton"},A.default.createElement($t,{size:42,iconSize:20,onClick:()=>{e.onPlayClicked(e.album)}})))),A.default.createElement("div",{className:"main-card-cardMetadata"},A.default.createElement("span",{draggable:"false",title:e.album.name,className:wa["main-cardHeader-link"]+" main-cardHeader-link",dir:"auto"},A.default.createElement("div",{className:"main-cardHeader-text"},e.album.name)),A.default.createElement("div",{className:"main-cardSubHeader-root"},e.album.artists.map(t=>A.default.createElement("span",null,A.default.createElement("a",{href:"#",draggable:"false",onClick:e=>{e.stopPropagation(),h(i.artist,t.uri)}},t.name))).reduce((e,t)=>null===e?[t]:[...e,A.default.createElement(A.default.Fragment,null,", "),t],null)))))):r)}function Sa(){const[a,t]=(0,I.useState)([]);var[e,r]=(0,I.useState)("");const[l,n]=(0,I.useState)("");var i=[{key:"title",label:_(["collection.sort.alphabetical"])}];(0,I.useEffect)(()=>{!async function(){var e=await p.getAlbums();t(Array.from(e).map(([,e])=>e))}()},[]);const o=(0,I.useMemo)(()=>{return e=a,""===(t=l)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.artists.some(e=>e.name.toLowerCase().includes(t.toLowerCase())));var e,t},[a,l]),[c,s]=(0,I.useState)(K(V({},i[0]),{order:"ascending"}));var u=(0,I.useMemo)(()=>{return[...(e=o,"title"!==(a=c).key?e:e.sort((e,t)=>m(e.name,t.name,a.order)))];var e,a},[o,c]);function d(e){Je(e.getTracks().map(e=>e.localTrack))}return I.default.createElement(I.default.Fragment,null,I.default.createElement("div",{className:ka["album-header"]},I.default.createElement("h1",null,_(["albums"])),I.default.createElement("div",{className:ka.controls},I.default.createElement(qt,{search:e,setSearch:r,debouncedSearch:l,setDebouncedSearch:n}),I.default.createElement(Xe,{sortOptions:i,selectedSortOption:c,setSelectedSortOption:function(t){s(e=>{return{key:t,order:e.key===t&&"ascending"===e.order?"descending":"ascending"}})}}))),I.default.createElement("div",{className:ka["album-grid"]+" main-gridContainer-gridContainer main-gridContainer-fixedWidth"},u.map(e=>I.default.createElement(xa,{key:e.uri,album:e,onPlayClicked:d}))))}var H=t(a()),Ca={container:"app-module__container___thHYo_betterDlocalDfiles",padded:"app-module__padded___23rZp_betterDlocalDfiles",header:"app-module__header___qX4vF_betterDlocalDfiles","image-container":"app-module__image-container___aRmdE_betterDlocalDfiles","text-container":"app-module__text-container___n-DRN_betterDlocalDfiles","action-bar":"app-module__action-bar___XOdUe_betterDlocalDfiles","album__action-bar":"app-module__album__action-bar___JTE4s_betterDlocalDfiles",tabBar:"app-module__tabBar___EngzO_betterDlocalDfiles",active:"app-module__active___JYUKA_betterDlocalDfiles","album-grid":"app-module__album-grid___JeelH_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","play-button":"app-module__play-button___8YiVF_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","album-header":"app-module__album-header___J1nVK_betterDlocalDfiles","search-container":"app-module__search-container___SlAU8_betterDlocalDfiles","search-icon":"app-module__search-icon___-9z2r_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles",upper:"app-module__upper___-tDl3_betterDlocalDfiles","sort-menu-header":"app-module__sort-menu-header___MjA0Y_betterDlocalDfiles","sort-menu-caret":"app-module__sort-menu-caret___adUDw_betterDlocalDfiles","sort-menu-item":"app-module__sort-menu-item___9QPeR_betterDlocalDfiles","main-cardHeader-link":"app-module__main-cardHeader-link___BfWlZ_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","action-bar-button-container":"app-module__action-bar-button-container___ExnsR_betterDlocalDfiles"},M=t(a());function Na(t){var e=[{key:"title",label:_(["sort.title"])},{key:"album",label:_(["sort.album"])}];return M.default.createElement(M.default.Fragment,null,M.default.createElement("div",{className:""+Ca["action-bar"]},M.default.createElement("div",{className:Ca["flex-centered"]+" "+Ca["action-bar-button-container"]},M.default.createElement($t,{size:60,iconSize:24,onClick:()=>Je(t.tracks.map(e=>e.localTrack))}),M.default.createElement(ma,{label:_(["more.label.context"],t.artist.name),menu:M.default.createElement(fa,{tracks:t.tracks})}))),M.default.createElement(Ye,{tracks:t.tracks,subtracks:[],gridLabel:t.artist.name,useTrackNumber:!1,onPlayTrack:e=>Ze(e,t.tracks.map(e=>e.localTrack)),headers:e,getRowContent:e=>[M.default.createElement(la,{track:e,withArtists:!1}),M.default.createElement(ta,{track:e})]}))}function Ra(e){return H.default.createElement(we,{image:H.default.createElement("img",{src:e.artist.image,alt:"artist image",className:"main-image-image main-entityHeader-image main-entityHeader-shadow main-image-loaded"}),subtitle:_(["artist"]),title:e.artist.name})}function Pa(){var e=Spicetify.Platform.History;const t=null!=(l=e.location.state.uri)?l:null;if(null===t)return e.replace(i.artists),H.default.createElement(H.default.Fragment,null);const[a,r]=(0,H.useState)(null);var l=null!=a?p.getArtistTracks(a.uri):[];return(0,H.useEffect)(()=>{!async function(){var e=await p.getArtists();e.has(t)?r(e.get(t)):h(i.artists)}()},[]),H.default.createElement(H.default.Fragment,null,null!==a&&H.default.createElement(H.default.Fragment,null,H.default.createElement(Ra,{artist:a}),H.default.createElement(Na,{tracks:l,artist:a})))}var Oa=function(){var e;const t=Spicetify.Platform.History,a=t.location;let r=n.default.createElement(n.default.Fragment,null);switch(a.pathname){case i.tracks:r=n.default.createElement(ia,null);break;case i.album:r=n.default.createElement(Da,null);break;case i.albums:r=n.default.createElement(Sa,null);break;case i.artist:r=n.default.createElement(Pa,null);break;case i.artists:r=n.default.createElement(Ea,null);break;default:t.replace(i.tracks)}var l=document.querySelector(".main-topBar-topbarContentWrapper");return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:ee+" "+te},r),null!==l&&ae.default.createPortal(n.default.createElement(me,{onItemClicked:e=>t.push(e.href),items:re,activeItem:null!=(e=re.find(e=>e.href.startsWith(a.pathname)))?e:re[0]}),l))},Ia=t(a());return r=Q,q(L({},"__esModule",{value:!0}),r)})();const render=()=>betterDlocalDfiles.default();